<form [formGroup]="checkboxForm" (ngSubmit)="submit()">
<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-12 col-xl-8">
            @for(product of products; track products){
            <div class ="card shadow my-3">
                <div class= "card-body d-flex flex-row align-items-center justify-content-between p-3 mb-3">
                <div class = "card-title">
                    <h2>{{product.title}}</h2>
                    <p>{{product.description}}</p>
                </div>
            <div class="price"> {{product.price}}
            </div>
            <div formGroupName="selectedProducts">
            <div class="form-check">
                <label class="form-check-label" for="flexCheckDefault">Add</label>
                <input class="form-check-input" type="checkbox" [checked]="selectedCheckboxes[product.id] || false"
                (change)="onCheckboxChange(product.id, $event)" value="{{product.price}}" 
                [formControlName]="product.id">
            </div>
            </div>
        </div>
            <div class="d-flex justify-content-end w-100">
                <app-panel *ngIf="product.id === 3 && selectedCheckboxes[3]"></app-panel>
            </div>
        </div>
        }
        </div>
    </div>
    
    <div class="row justify-content-center">
        <div class="col-12 col-xl-8">
            <div class="card d-flex flex-row justify-content-end">
                <h5>Budgeted price: </h5> 
                <div class="total-price mx-5"> {{ totalPrice }}</div>
        </div>
    </div>
</div>
</div>

</form>    

